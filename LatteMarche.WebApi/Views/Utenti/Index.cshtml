@using LatteMarche.WebApi.Models


<!-- Pannello conferma eliminazione riga excel -->
@Html.Partial("_ConfirmDialog", new DialogViewModel()
{
    Id = "delete-dialog",
    ClassName = "delete-dialog",
    Title = "Conferma eliminazione",
    Message = "Sei sicuro di voler eliminare l'utente selezionato?"
})



<div class="col-lg-12" style="margin-top:1em">
    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">

            <!-- Portlet Caption -->
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Elenco degli Utenti
                    </h3>
                </div>
            </div>

            <!-- Portlet Tools -->
            <div class="m-portlet__head-tools">
                <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                    <li class="nav-item m-tabs__item">
                        <a class="btn m-btn--pill m-btn--air btn-info" href="@System.Configuration.ConfigurationManager.AppSettings["webUrl"]Utenti/New">+ Aggiungi Utente</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="m-portlet__body">

            <!--begin: Datatable -->
            <div class="m_datatable" ></div>
            <!--end: Datatable -->

        </div>
    </div>
</div>

<script type="text/javascript">

    jQuery(document).ready(function () {

        var datatable = $('.m_datatable').mDatatable({
            // datasource definition
            data: {
                type: 'remote',
                source: {
                    read: {
                        url: 'http://keenthemes.com/metronic/preview/inc/api/datatables/demos/default.php'
                    }
                },
                pageSize: 10,
                saveState: {
                    cookie: true,
                    webstorage: true
                },
                serverPaging: true,
                serverFiltering: true,
                serverSorting: true
            },

            // layout definition
            layout: {
                theme: 'default', // datatable theme
                class: '', // custom wrapper class
                scroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.
                footer: false // display/hide footer
            },

            // column sorting
            sortable: true,

            // column based filtering
            filterable: false,

            pagination: true,

            // columns definition
            columns: [{
                field: "RecordID",
                title: "#",
                sortable: false, // disable sort for this column
                width: 40,
                selector: false,
                textAlign: 'center',
            }, {
                field: "OrderID",
                title: "Order ID",
                // sortable: 'asc', // default sort
                filterable: false, // disable or enable filtering
                width: 150,
                // basic templating support for column rendering,
                template: '{{OrderID}} - {{ShipCountry}}'
            }, {
                field: "ShipCountry",
                title: "Ship Country",
                width: 150,
                template: function (row) {
                    // callback function support for column rendering
                    return row.ShipCountry + ' - ' + row.ShipCity;
                }
            }, {
                field: "ShipCity",
                title: "Ship City"
            }, {
                field: "Currency",
                title: "Currency",
                width: 100
            }, {
                field: "ShipDate",
                title: "Ship Date",
                sortable: 'asc'
            }, {
                field: "Latitude",
                title: "Latitude"
            }, {
                field: "Status",
                title: "Status",
                // callback function support for column rendering
                template: function (row) {
                    var status = {
                        1: { 'title': 'Pending', 'class': 'm-badge--brand' },
                        2: { 'title': 'Delivered', 'class': ' m-badge--metal' },
                        3: { 'title': 'Canceled', 'class': ' m-badge--primary' },
                        4: { 'title': 'Success', 'class': ' m-badge--success' },
                        5: { 'title': 'Info', 'class': ' m-badge--info' },
                        6: { 'title': 'Danger', 'class': ' m-badge--danger' },
                        7: { 'title': 'Warning', 'class': ' m-badge--warning' }
                    };
                    return '<span class="m-badge ' + status[row.Status].class + ' m-badge--wide">' + status[row.Status].title + '</span>';
                }
            }, {
                field: "Type",
                title: "Type",
                // callback function support for column rendering
                template: function (row) {
                    var status = {
                        1: { 'title': 'Online', 'state': 'danger' },
                        2: { 'title': 'Retail', 'state': 'primary' },
                        3: { 'title': 'Direct', 'state': 'accent' }
                    };
                    return '<span class="m-badge m-badge--' + status[row.Type].state + ' m-badge--dot"></span>&nbsp;<span class="m--font-bold m--font-' + status[row.Type].state + '">' + status[row.Type].title + '</span>';
                }
            }, {
                field: "Actions",
                width: 110,
                title: "Actions",
                sortable: false,
                overflow: 'visible',
                template: function (row) {
                    var dropup = (row.getDatatable().getPageSize() - row.getIndex()) <= 4 ? 'dropup' : '';

                    return '\
						<div class="dropdown '+ dropup + '">\
							<a href="#" class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="dropdown">\
                                <i class="la la-ellipsis-h"></i>\
                            </a>\
						  	<div class="dropdown-menu dropdown-menu-right">\
						    	<a class="dropdown-item" href="#"><i class="la la-edit"></i> Edit Details</a>\
						    	<a class="dropdown-item" href="#"><i class="la la-leaf"></i> Update Status</a>\
						    	<a class="dropdown-item" href="#"><i class="la la-print"></i> Generate Report</a>\
						  	</div>\
						</div>\
						<a href="#" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Edit details">\
							<i class="la la-edit"></i>\
						</a>\
						<a href="#" class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill" title="Delete">\
							<i class="la la-trash"></i>\
						</a>\
					';
                }
            }]
        });

        var query = datatable.getDataSourceQuery();

    });

</script>
