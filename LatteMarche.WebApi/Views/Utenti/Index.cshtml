@using LatteMarche.WebApi.Models


<!-- Pannello conferma eliminazione riga excel -->
@Html.Partial("_ConfirmDialog", new DialogViewModel()
{
    Id = "delete-dialog",
    ClassName = "delete-dialog",
    Title = "Conferma eliminazione",
    Message = "Sei sicuro di voler eliminare l'utente selezionato?"
})



<div class="col-lg-12" style="margin-top:1em">
    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">

            <!-- Portlet Caption -->
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Elenco degli Utenti
                    </h3>
                </div>
            </div>

            <!-- Portlet Tools -->
            <div class="m-portlet__head-tools">
                <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                    <li class="nav-item m-tabs__item">
                        <a class="btn m-btn--pill m-btn--air btn-info" href="@System.Configuration.ConfigurationManager.AppSettings["webUrl"]Utenti/New">+ Aggiungi Utente</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="m-portlet__body">

            <!--begin: Datatable -->
            <div class="m_datatable" ></div>
            <!--end: Datatable -->

        </div>
    </div>
</div>

<script type="text/javascript">

    jQuery(document).ready(function () {

        var datatable = $('.m_datatable').mDatatable({

            // datasource definition
            data: {
                type: 'remote',
                source: 'http://localhost:54913/api/Utenti',
                pageSize: 10,
                saveState: {
                    cookie: true,
                    webstorage: true
                },
            },

            // layout definition
            layout: {
                theme: 'default', // datatable theme
                class: '', // custom wrapper class
                scroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.
                footer: false // display/hide footer
            },

            // column sorting
            sortable: true,

            // column based filtering
            filterable: false,

            pagination: true,

            // columns definition
            columns: [{
                field: "Id",
                title: "#",
                sortable: false, // disable sort for this column
                width: 40,
                selector: false,
                textAlign: 'center',
            }, {
                field: "Nome",
                title: "Nome",
                // sortable: 'asc', // default sort
                filterable: false, // disable or enable filtering
                width: 150,
                // basic templating support for column rendering,

            }, {
                field: "Cognome",
                title: "Cognome",
                width: 150
            }, {
                template: function (row) {
                    return '<a href="http://localhost:54913/Utenti/Details?id=' + row.Id + '">dettaglio</a>';
                }                         
            }]
        });

        //var query = datatable.getDataSourceQuery();

    });

</script>
