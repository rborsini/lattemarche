

<div class="col-lg-12" style="margin-top:1em">
    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">
            <!-- Portlet Caption -->
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Copertura Territoriale dei Trasportatori
                    </h3>
                </div>
            </div>
        </div>

        <div class="m-portlet__body">
            <div class="form-group m-form__group row">
                <label class="col-lg-2"></label>
                <label class="col-lg-2 col-form-label">
                    Trasportatore:
                </label>
                <div class="col-lg-4">
                    <div class="m-select2 m-select2--air m-select2--pill">
                        <select class="form-control m-select2 select2-hidden-accessible" data-bind="options: Trasportatori, optionsValue: 'Id', value: IdTrasportatore, optionsText: 'Nome', optionsCaption: '', select2: {allowClear: true}" id="m_select2_12_3" name="param" data-placeholder="Selezione trasportatore" tabindex="-1" aria-hidden="true">
                            <option></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group m-form__group row">
                <label class="col-lg-2"></label>
                <label class="col-lg-2 col-form-label">
                    Giro degli allevamenti:
                </label>
                <div class="col-lg-4">
                    <div class="btn-group bootstrap-select form-control m-bootstrap-select m-bootstrap-select--air m-bootstrap-select--pill m_">
                        <div class="dropdown-menu open" role="combobox" x-placement="bottom-start" style="max-height: 295.828px; overflow: hidden; min-height: 0px; position: absolute; transform: translate3d(0px, 37px, 0px); top: 0px; left: 0px; will-change: transform;"></div>
                        <select class="form-control m-select2" data-bind="options: GiriAllevamento, value: GiroAllevamentoSelezionato, optionsValue: 'Value', optionsText: 'Text', optionsCaption: '', select2: {allowClear: true}" name="param" data-placeholder="Seleziona il Giro degli Allevamenti"></select>
                    </div>
                </div>
            </div>
            <div class="form-group m-form__group row">
                <label class="col-lg-4"></label>
                <div class="col-lg-3">
                    <div class="m-portlet__head-tools">
                        <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                            <li class="nav-item m-tabs__item">
                                <a class="btn m-btn--pill m-btn--air btn-info" href="">+ Aggiungi Giro</a>
                            </li>
                            <li class="nav-item m-tabs__item">
                                <a class="btn m-btn--pill m-btn--air btn-warning" href="">Modifica Giro</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- INIZIO del pannello che compare nel momento in cui viene premuto il bottone "+ Aggiungi Giro" o "Modifica Giro" -->
    <div id="dettaglio-giro-allevamento" class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">
            <!-- Portlet Caption -->
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Dettaglio del Giro degli Allevamenti
                    </h3>
                </div>
            </div>
        </div>

        <div class="m-portlet__body">
            <div class="form-group m-form__group row">
                <label class="col-lg-2"></label>
                <label class="col-lg-2 col-form-label">
                    Denominazione del Giro:
                </label>
                <div class="col-lg-4">
                    <input type="text" data-bind="" class="form-control m-input m-input--pill m-input--air" placeholder="Inserisci nome giro">
                </div>
            </div>
            <div class="form-group m-form__group row">
                <label class="col-lg-2"></label>
                <label class="col-lg-2 col-form-label">
                    Codice del Giro:
                </label>
                <div class="col-lg-4">
                    <input type="text" data-bind="" class="form-control m-input m-input--pill m-input--air" placeholder="Inserisci codice giro">
                </div>
            </div>
            <div class="form-group m-form__group row">
                <label class="col-lg-4"></label>
                <div class="col-lg-3">
                    <div class="m-portlet__head-tools">
                        <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                            <li class="nav-item m-tabs__item">
                                <a class="btn m-btn--pill m-btn--air btn-info" href="">Salva</a>
                            </li>
                            <li class="nav-item m-tabs__item">
                                <a class="btn m-btn--pill m-btn--air btn-danger" href="">Elimina</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- FINE del pannello che compare nel momento in cui viene premuto il bottone "+ Aggiungi Giro" o "Modifica Giro" -->

    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">
            <!-- Portlet Caption -->
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Dettaglio trasportatore
                    </h3>
                </div>
            </div>
        </div>
        <div class="m-portlet__body">
            <div class="form-group m-form__group row">
                <label class="col-lg-4"></label>
                <label class="col-lg-4 col-form-label">
                    <span style="font-weight:600;font-size:22px" data-bind="text:Trasportatore_Nome() + '   ' + Trasportatore_Indirizzo()"></span>
                </label>
            </div>
        </div>
    </div>

    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__body">
            <div class="form-group m-form__group row">
                <label class="col-lg-4"></label>
                <label class="col-lg-4 col-form-label">
                    <button type="button" class="btn m-btn--pill m-btn--air btn-info btn-block">
                        Carica gli Allevamenti in cui si reca il Trasportatore
                    </button>
                </label>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">

    var viewModel = null;

    jQuery(document).ready(function () {
        
        viewModel = {

            Trasportatori: ko.observableArray(),
            IdTrasportatore: ko.observable(),
            Trasportatore_Nome: ko.observable(),
            Trasportatore_Indirizzo: ko.observable(),
            GiriAllevamento: ko.observableArray(),
            GiroAllevamentoSelezionato: ko.observable()
        };
       
        ko.applyBindings(viewModel);

        // bind dropdown Trasportatori
        function BindTrasportatori(idTrasportatori) {
            $.getJSON(apiUrl + "Trasportatori", function (result) {
                viewModel.Trasportatori(result);
                viewModel.IdTrasportatore(idTrasportatori);
            });
        };

        BindTrasportatori();


        // // // P.D. !! // // //
        function GetTrasportatore(idTrasportatori) {
            $.getJSON(apiUrl + "Trasportatori/details?id=123", function (result) {
                if (result != null) {
                    viewModel.Trasportatore_Nome(result);
                    viewModel.Trasportatore_Indirizzo(result);
                }
            });
        }

        GetTrasportatore();
   
    });
</script>
