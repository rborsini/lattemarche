<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <appSettings>

    <add key="version" value="v_20.07.27" />

    <!-- Flag abilitazione permessi MVC e API -->
    <add key="apiAuthEnabled" value="true" />
    <add key="mvcAuthEnabled" value="true" />
    
    <add key="days_depth" value="60" />
    
    <!-- da cloud a locale -->
    <add key="synch_pull_enabled" value="false" />
    
    <!-- da locale a cloud -->
    <add key="synch_push_enabled" value="true" />
    <add key="send_sitra_enabled" value="false" />
    
    <!-- Sitra synch data-->
    <add key="username" value="Vale" />
    <add key="password" value="Valentina!1" />
    <add key="codOperatore" value="03834" />
    
    <!-- id Corrispondente a Latte Crudo-->
    <add key="idLatteCrudo" value="51" />
    <add key="idLatteCrudoStoccatoQM" value="75" />
    
    <!-- CUAA LatteMarche -->
    <add key="CUAA" value="00888380425" />
    
    <!-- Codice univoco azienda-->
    <add key="Sitra.ServiceUri" value="http://www.sitramarche.it/WebApi" />
    
    <!-- Configurazione download mail da Assam -->
    <add key="Assam.Mail.Hostname" value="we-code.it" />
    <add key="Assam.Mail.Port" value="993" />
    <add key="Assam.Mail.Username" value="lattemarche@we-code.it" />
    <add key="Assam.Mail.Password" value="Lattemarche123" />
    <add key="Assam.Mail.From" value="simone.coppari@regione.marche.it;roberto.borsini@we-code.it" />
    <add key="Assam.Mail.Depth" value="10000" />
    
    <!--<add key="Assam.Ftp.Url" value="127.0.0.1:24" />-->
    <add key="Assam.Ftp.Url" value="" />
    <add key="Assam.Ftp.Username" value="" />
    <add key="Assam.Ftp.Password" value="" />
    
    <!-- 1 = Chilogrammo, 2 = Quintale, 3 = Litri-->
    <add key="IdUnitaMisura" value="1" />
    
  </appSettings>
  <connectionStrings>
    <!--<add name="LatteMarcheDbContext" connectionString="data source=(local)\SQLEXPRESS;initial catalog=lattemarche;persist security info=True;user id=sa;password=Admin.Admin;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" />-->
    <!--<add name="LatteMarcheDbContext" connectionString="data source=192.168.0.77\SQLEXPRESS;initial catalog=lattemarche;persist security info=True;user id=sa;password=Admin.Admin;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" />-->
    <add name="LatteMarcheDbContext" connectionString="data source=lattemarche.database.windows.net;initial catalog=lattemarche;persist security info=False;user id=lattemarche;password=Whitemilk01!;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" />
    <add name="OldDbContext" connectionString="data source=79.1.200.254;initial catalog=NEWDB_LATTE_MARCHE;persist security info=False;user id=userlm;password=admin;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" />
  </connectionStrings>

  <!-- Logging -->
  <log4net>
    <appender name="DefaultFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\\log.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <datePattern value="\.yyyy-MM-dd\.\t\x\t" />
      <maxSizeRollBackups value="3" />
      <maximumFileSize value="100MB" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline%exception" />
      </layout>
    </appender>

    <appender name="SentryAppender" type="Sentry.Log4Net.SentryAppender, Sentry.Log4Net">
      <Dsn value="https://a3515e3398564ddd842123074436d10f@o382996.ingest.sentry.io/5367035" />
      <SendIdentity value="true" />
      <threshold value="DEBUG" />
    </appender>

    <root>
      <level value="DEBUG" />
    </root>
    <logger name="LatteMarche">
      <appender-ref ref="DefaultFileAppender" />
      <appender-ref ref="SentryAppender" />
    </logger>
  </log4net>

  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <membership defaultProvider="SqlMembershipProvider">
      <providers>
        <clear />
        <add name="SqlMembershipProvider" type="LatteMarche.WebApi.Providers.CustomMembershipProvider" />
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.6.1">
      <assemblies />
    </compilation>
    <httpRuntime targetFramework="4.5" />
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.1.2.0" newVersion="5.1.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.7.0" newVersion="5.2.7.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.7.0" newVersion="5.2.7.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-12.0.0.0" newVersion="12.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.OAuth" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.Cookies" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.6.0" newVersion="5.2.6.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Cors" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.7.0" newVersion="5.2.7.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="NPOI" publicKeyToken="0df73ec7942b34e1" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.4.1.0" newVersion="2.4.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="NPOI.OOXML" publicKeyToken="0df73ec7942b34e1" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.4.1.0" newVersion="2.4.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.ValueTuple" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime.InteropServices.RuntimeInformation" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.2.0" newVersion="4.0.2.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
  <system.webServer>
    <modules>
      <remove name="WebDAVModule" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <remove name="WebDAV" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
</configuration>